<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登录</title>
    <link href="css/login.css" rel="stylesheet">
</head>
<body>
<div>
    <form id="form">
        <h1 id="loginMsg">LOGIN IN</h1>
        <p>Username:<input type="text" placeholder="请输入用户名" v-model="user.username"></p>

        <p>Password: <input name="password" type="password" id="password" placeholder="请输入密码" v-model="user.password"></p>

        <div id="subDiv">
            <input type="button" value="登录" @click="f_login()">
            <input type="reset" class="button" value="reset">&nbsp;&nbsp;&nbsp;
            <a href="reg.html">没有账号？点击注册</a>
        </div>
    </form>
</div>

<script src="https://cdn.staticfile.org/vue/2.6.14/vue.min.js"></script>
<!-- import JavaScript -->
<script src="https://cdn.bootcdn.net/ajax/libs/axios/0.21.1/axios.min.js"></script>
<script>
    let v=new Vue({
        el:'body>div',
        data:{
            user:{
                username:"",
                password:"",
                role:""
            }
        },
        methods:{
            f_login(){
                axios.post("/login",v.user).then(function (response){
                    if (response.data==1)
                    {
                        alert("登录成功！")
                        location.href="http://localhost:9001/index.html"
                    }
                    else if (response.data==2)
                    {
                        alert("密码错误！")
                    }
                    else {
                        alert("用户名不存在!")
                    }
                })
            }
        }
    })
</script>
</body>
</html>

